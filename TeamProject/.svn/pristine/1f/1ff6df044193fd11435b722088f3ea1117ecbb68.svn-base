<%--
author  : 김준호
since   : 2017. 5. 10.
version : 1.0
subject :
description :
--%>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>조직도</title>
<link rel="stylesheet" href="${pageContext.servletContext.contextPath}/resources/css/jquery-ui.css">
<link rel="stylesheet" href="${pageContext.servletContext.contextPath}/resources/css/common.css">
<link rel="stylesheet" href="${pageContext.servletContext.contextPath}/resources/css/jquery.treeview.css">
<link rel="stylesheet" href="${pageContext.servletContext.contextPath}/resources/css/screen.css">
<script src="${pageContext.servletContext.contextPath}/resources/js/jquery.min.js"></script>
<script src="${pageContext.servletContext.contextPath}/resources/js/jquery-ui.min.js"></script>
<script src="${pageContext.servletContext.contextPath}/resources/js/jquery.treeview.js"></script>
<script src="${pageContext.servletContext.contextPath}/resources/js/jquery.cookie.js"></script>
<style>
	#showDepEmployees {
		float: left;
	}
	#tree {
		float: left;
	}
</style>
<script type="text/javascript">
	/* 조직도 트리 */
	$(function() {
		$("#tree").treeview({
			collapsed: true,
			animated: "medium",
			control:"#sidetreecontrol",
			persist: "location"
		});

		//조직도 창에서 선택한 직원의 정보를 회의실 관리자 선택창으로 전달
		$('#ok').click(function () {
			var empName; //이름
			var empId;   //사번
			if(opener != null){
				//조직도에서 선택한 이름의 텍스트값을 회의실관리자 선택창으로 가져옴
				if('conf' == '${param.mode}'){
					$("#table input[type=checkbox]:checked").parent().parent().children().each(function( index ){
						//체크한 행의 이름
						if(index == 1){
							empName = $(this).text();
						}
						//체크한 행의 사번
						if(index == 2){
							empId = $(this).text();
						}
					});
					if(empName == "" || empId == "") return;
					opener.setConfManager(empName, empId);
					window.close();
				}

				if('edu' == '${param.mode}'){
					$("#table input[type=checkbox]:checked").parent().parent().children().each(function( index ){
						//체크한 행의 이름
						if(index == 1){
							empName = $(this).text();
						}
						//체크한 행의 사번
						if(index == 2){
							empId = $(this).text();
						}
					});
					if(empName == "" || empId == "") return;
					opener.setEduManager(empName, empId);
					window.close();
				}
			}
		});
	})
</script>
</head>
<body>
	<div id="sidetree">
		<div class="treeheader">&nbsp;</div>

		<div id="sidetreecontrol"><a href="?#">전체 닫기</a> | <a href="?#">전체 열기</a></div>
		<ul id="tree">
			<li>
				<strong>CFO 조직</strong>
				<ul>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14AA22">재무관리팀</a></li>
				</ul>
			</li>
			<li>
				<strong>기획실</strong>
				<ul>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14GA02">기획팀</a></li>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14GA07">QA팀</a></li>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14GA08">보안파트</a></li>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14GA09">최적화파트</a></li>
				</ul>
			</li>
			<li>
				<strong>인사지원실</strong>
				<ul>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14GA11">인사파트</a></li>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=A00023">태양광TFT</a></li>
				</ul>
			</li>
			<li>
				<strong>기술연구소</strong>
			</li>
			<li>
				<strong>영업총괄센터</strong>
				<ul>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14KA02">SI영업팀</a></li>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14KA03">ICT팀</a></li>
				</ul>
			</li>
			<li>
				<strong>SI사업부</strong>
				<ul>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14LA02">Account Lead</a></li>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14LA03">기획파트</a></li>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14LA06">플랜트/ICT사업팀</a></li>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14LA10">SI사업팀</a></li>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14LA12">솔루션파트</a></li>
					<li><a href="organizationchart?mode=${param.mode}&dep_id=14LA13">ERP사업팀</a></li>
				</ul>
			</li>
			<li>
				<strong>SM사업부</strong>
				<ul>
					<li><a href="#">인프라총괄센터</a>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA03">데이터센터추진 TFT</a></li>
						</ul>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA04">인프라기술지원파트</a></li>
						</ul>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA05">TA지원파트</a></li>
						</ul>
					</li>
					<li><a href="#">GSC SM센터</a>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA09">경영관리파트</a></li>
						</ul>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA10">재무파트</a></li>
						</ul>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA11">영업물류파트</a></li>
						</ul>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA12">모바일파트</a></li>
						</ul>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA13">인프라파트</a></li>
						</ul>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA14">로열티파트</a></li>
						</ul>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA15">플랜트운영파트</a></li>
						</ul>
					</li>
					<li><a href="#">Shared Service센터</a>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA16">GSM운영파트</a></li>
						</ul>
					</li>
					<li><a href="#">홈쇼핑 SM센터</a>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA25">기간계개발지원파트</a></li>
						</ul>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA32">PD파트</a></li>
						</ul>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA33">MC개발지원파트</a></li>
						</ul>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA34">인프라운영지원파트</a></li>
						</ul>
					</li>
					<li><a href="#">리테일 SM센터</a>
						<ul>
							<li><a href="organizationchart?mode=${param.mode}&dep_id=14MA19">GS리테일팀</a></li>
						</ul>
					</li>
				</ul>
			</li>
			<li>
				<strong>CFO직속</strong>
			</li>
		</ul>
	</div>

	<div id="showDepEmployees">
	<!-- <form action="organizationchart" method="post"> -->
		<table id="table">
			<tr>
				<th></th>
				<th>이름</th>
				<th>사번</th>
				<th>직위</th>
			</tr>
		<c:forEach var="employeesList" items="${employeesList}" varStatus="status">
			<tr>
				<!-- 체크박스 -->
				<td><input type="checkbox" name="selectedEmployee"/></td>
				<!-- 직원 이름 -->
				<td><input type="hidden" id="empName" name="empName" value="${employeesList.empName}">${employeesList.empName}</td>
				<!-- 직원 아이디 -->
				<td><input type="hidden" id="empId" name="empId" value="${employeesList.empId}">${employeesList.empId}</td>
				<!-- 직원 직위 -->
				<td><input type="hidden" id="positionName" name="positionName" value="${employeesList.positionName}">${employeesList.positionName}</td>
			</tr>
		</c:forEach>
		</table>
		<button id='ok'>확인</button>
		<!-- <input type="submit" value="확인"/> -->
	<!-- </form> -->
	</div>

</body>
</html>